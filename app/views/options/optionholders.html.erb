<%= javascript_include_tag "https://www.gstatic.com/charts/loader.js" %>
<div class="page-header">
  <%= link_to dashboard_company_options_path, :class => 'btn btn-primary float-right' do %>
      <span class="fa fa-tachometer-alt"></span>
      Dashboard
  <% end %>
  <h2>Optionholders</h2>

</div>


<div class = "row text-center" >
  <div class = "col-md-12">
    <%= tag.div id: 'optionOutstanding-column-chart', data: { options: options_outstanding.to_json } %>
    <br/>
    <b>Options by Optionee</b>
    <br/>
    Total Optionholders: <%= @num_optionholders %>
    <br/>
    Total Outstanding Options: <%= number_with_delimiter(@num_options_active) %>
  </div>
</div>
<hr/>


<div class="table-responsive">
  <table id="optionholdersTable" class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
      <th>Optionholder</th>
      <th>Address</th>
      <th>Email</th>
      <th>Shares</th>
      <th>Percentage</th>
    </tr>
    </thead>

    <tbody>
    <% @optionholders.each do |optionholder| %>
      <tr>
      <td><%= link_to company_person_path(@company, optionholder.person_id) do %><%= optionholder.person.name %><%end%></td>
      <td>
        <%= optionholder.person.address %><br/>
        <%= optionholder.person.city %>, <%= optionholder.person.state %><br/>
        <%= optionholder.person.zip %>  <%= optionholder.person.country %>
      </td>
      <td><%= optionholder.person.email %></td>
      <td><%= number_with_delimiter(optionholder.sum_options_issued.to_i) %></td>
      <td align="right"><%= number_to_percentage(((optionholder.sum_options_issued / @num_options_active)*100), precision: 2) %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
